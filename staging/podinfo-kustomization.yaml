apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: podinfo
  #namespace: apps
  #namespace: default
  namespace: dev-team
spec:
  #serviceAccountName: dev-team # WRONG: it cannot create new namespaces!
  #serviceAccountName: dev-team-gitops-reconciler
  serviceAccountName: gitops-reconciler
  dependsOn:
    - name: namespaces
  interval: 1m
  sourceRef:
    kind: GitRepository
    name: dev-team
  path: ./staging/podinfo
  prune: true
